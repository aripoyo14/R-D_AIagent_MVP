"""
ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
"""

import streamlit as st
import os
import streamlit.components.v1 as components

@st.dialog("ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼", width="large")
def preview_slide_modal(html_content: str):
    """
    ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã™ã‚‹
    """
    components.html(html_content, height=600, scrolling=True)

def render_sample_report():
    """
    ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹
    """
    st.header("ğŸ“‘ ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ")
    
    # è¡¨ç¤ºã™ã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«åãƒªã‚¹ãƒˆ
    slide_files = [
        "slide-æ—­æ—¥è‡ªå‹•è»Šæ ªå¼ä¼šç¤¾-20251206-214751.html",
        "slide-æ—­æ—¥è‡ªå‹•è»Šæ ªå¼ä¼šç¤¾-20251207-045625.html",
        "slide-æ—­æ—¥è‡ªå‹•è»Šæ ªå¼ä¼šç¤¾-20251207-053453.html"
    ]
    
    base_dir = os.path.join(os.getcwd(), "outputs")
    
    for slide_file in slide_files:
        file_path = os.path.join(base_dir, slide_file)
        
        # ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
        if not os.path.exists(file_path):
            st.warning(f"ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {slide_file}")
            continue
            
        with st.container():
            col1, col2 = st.columns([3, 1], vertical_alignment="center")
            
            with col1:
                st.markdown(f"#### ğŸ“„ {slide_file}")
            
            with col2:
                if st.button("ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼", key=f"preview_{slide_file}", type="primary", use_container_width=True):
                    try:
                        with open(file_path, "r", encoding="utf-8") as f:
                            slide_content = f.read()
                        preview_slide_modal(slide_content)
                    except Exception as e:
                        st.error(f"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ©ãƒ¼: {e}")
            
            st.divider()
