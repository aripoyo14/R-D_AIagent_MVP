# Gemini Canvas用プロンプト：AI Agent技術解説スライド生成

以下の内容を基に、プレゼンテーション用のスライドを生成してください。

## 要件

- **形式**: Googleスライドまたはプレゼンテーション形式
- **言語**: 日本語
- **対象**: 技術者・エンジニア向け
- **スタイル**: 
  - モダンで技術的なデザイン
  - 各スライドに適切な見出しと箇条書き
  - コードスニペットは適度に含める
  - フローチャートや図解を活用
  - 絵文字を効果的に使用（👑🕵️💡👿🔍など）

## スライド構成

### スライド1: タイトル
**タイトル**: AI Agentの働きと技術解説
**サブタイトル**: 面談録登録からレポート表示までの全フロー
**イメージ**: 化学メーカー向けAIエージェントシステムのロゴまたは概念図

---

### スライド2: システム概要
**タイトル**: システムの全体像
**内容**:
- 営業担当者が面談録を入力
- 5人のAIエージェント（イノベーション分隊）が自動議論
- 市場トレンド・社内知見を統合
- 戦略レポートを自動生成

**図解**: 5ステップのフローチャート
1. 面談録入力
2. AIレビュー
3. データベース保存
4. イノベーション分隊の議論
5. レポート表示

---

### スライド3: ステップ1 - 面談録入力
**タイトル**: 📝 ステップ1：面談録入力
**内容**:
- **実装**: app.py, components/sidebar.py
- **入力項目**:
  - 事業部選択
  - 企業名
  - 相手方 部署・役職
  - 面談メモ（テキストまたはファイル）
- **対応フォーマット**: docx/txt/pdf
- **技術**: Streamlit, python-docx, pypdf

**コードスニペット例**:
```python
import streamlit as st
from python-docx import Document

# ファイルアップロード
uploaded_file = st.file_uploader("面談メモをアップロード", type=["docx", "txt", "pdf"])
```

---

### スライド4: ステップ2 - AIレビュー
**タイトル**: 🤖 ステップ2：AIレビュー
**内容**:
- **AI**: Google Gemini 2.5 Flash/Pro
- **処理内容**:
  1. 面談内容の解析
  2. 情報の十分性判定
  3. 技術タグの自動抽出
  4. 追加質問の生成（情報不足時）

**技術的ポイント**:
- 構造化出力（Pydantic）
- プロンプトエンジニアリング
- 評価基準: 温度条件、強度・物性、耐性など

**ライブラリ**:
- LangChain
- Pydantic
- langchain-google-genai

---

### スライド5: AIレビューの実装
**タイトル**: AIレビューのコード実装
**内容**:

```python
from langchain_google_genai import ChatGoogleGenerativeAI
from pydantic import BaseModel, Field

class ReviewResult(BaseModel):
    is_sufficient: bool
    questions: List[str]
    summary: Optional[str]
    tech_tags: List[str]

llm = ChatGoogleGenerativeAI(
    model="gemini-2.5-flash-lite",
    temperature=0.3
)
```

**出力**: ReviewResultオブジェクト
- 情報の十分性フラグ
- 技術タグリスト
- 要約または追加質問

---

### スライド6: ステップ3 - データベース保存
**タイトル**: 🗄️ ステップ3：データベース保存
**内容**:
- **AI**: OpenAI Embeddings API (text-embedding-3-small)
- **データベース**: Supabase (PostgreSQL + pgvector)

**処理フロー**:
1. テキストを1536次元ベクトルに変換
2. メタデータを付与
3. Supabaseに保存

**技術的特徴**:
- ベクトル検索対応
- pgvector拡張でコサイン類似度検索
- メタデータ（JSONB型）でフィルタリング

---

### スライド7: ベクトル検索の仕組み
**タイトル**: ベクトル検索（RAG）の技術
**内容**:

**データベーススキーマ**:
```sql
CREATE TABLE documents (
  id BIGSERIAL PRIMARY KEY,
  content TEXT NOT NULL,
  metadata JSONB,
  embedding vector(1536)
);
```

**検索クエリ**:
```python
embeddings = OpenAIEmbeddings(model="text-embedding-3-small")
query_embedding = embeddings.embed_query(query_text)
# コサイン類似度で類似文書を検索
```

**効果**: クロスポリネーション（異なる事業部間での知識共有）

---

### スライド8: ステップ4 - イノベーション分隊
**タイトル**: 💬 ステップ4：イノベーション分隊の議論
**内容**: 5人のAIエージェントが協力して提案を作成

**5人のメンバー**:
1. 👑 **オーケストレーター（PM）**: 進行管理
2. 🕵️ **マーケットリサーチャー**: 市場調査
3. 🔍 **インターナルスペシャリスト**: 社内知見検索
4. 💡 **ソリューションアーキテクト**: 提案作成
5. 👿 **デビルズアドボケイト**: リスク分析

**AI**: Google Gemini 2.5 Flash/Pro

---

### スライド9: 議論フローの詳細
**タイトル**: イノベーション分隊の議論フロー
**内容**:

```
1. オーケストレーター
   ↓ ブリーフィング作成
2. マーケットリサーチャー ＋ インターナルスペシャリスト
   ↓ 情報収集（市場・社内）
3. オーケストレーター
   ↓ 方向性指示
4. ソリューションアーキテクト
   ↓ 初期提案
5. デビルズアドボケイト
   ↓ 批判的レビュー
6. ソリューションアーキテクト
   ↓ 改善案作成
7. オーケストレーター
   ↓ 最終レポート統合
```

---

### スライド10: マーケットリサーチャーの役割
**タイトル**: 🕵️ マーケットリサーチャー（外の目）
**内容**:

**調査対象**:
- 市場トレンド（DuckDuckGo検索）
- 特許情報（Google Patents）
- 学術論文（arXiv）

**使用API**:
```python
from ddgs import DDGS
import arxiv

# DuckDuckGo検索
with DDGS() as ddgs:
    results = list(ddgs.text(query, max_results=5))

# arXiv検索
search = arxiv.Search(query=search_query, max_results=5)
```

**出力**: 競合、市場規模、トレンド、特許、学術論文のサマリー

---

### スライド11: インターナルスペシャリストの役割
**タイトル**: 🔍 インターナルスペシャリスト（社内の情報通）
**内容**:

**役割**: 他事業部の類似知見をベクトル検索

**実装**:
```python
def search_cross_pollination(query_text: str, current_department: str):
    # クエリをベクトル化
    query_embedding = embeddings.embed_query(query_text)
    
    # Supabaseでベクトル検索
    response = supabase.rpc("match_documents", {
        "query_embedding": query_embedding,
        "match_threshold": 0.0,
        "match_count": 50
    })
    
    # 現在の事業部と異なるもののみ
    return [r for r in results if r.department != current_department]
```

**効果**: クロスポリネーション（部門横断の知識活用）

---

### スライド12: ソリューションアーキテクトの役割
**タイトル**: 💡 ソリューションアーキテクト（発明家）
**内容**:

**役割**:
- 市場データと社内データを統合
- 初期提案を作成
- フィードバックを踏まえた改善案を作成

**AI設定**:
```python
llm = get_llm(
    temperature=0.9,  # 創造性を高める
    streaming=True    # リアルタイム出力
)
```

**プロンプトの特徴**:
- 既存製品の提案は避ける
- 新しい「Chemical Reaction（組み合わせ）」を創出
- フィードバックに応じた修正

---

### スライド13: デビルズアドボケイトの役割
**タイトル**: 👿 デビルズアドボケイト（鬼の査読官）
**内容**:

**役割**: 提案を厳しく批判

**検証項目**:
1. 化学リスク（水解、熱劣化）
2. コスト実現性
3. 量産問題

**AI設定**:
```python
llm = get_llm(
    temperature=0.5,  # バランスの取れた批判的思考
    streaming=True
)
```

**出力形式**: 簡潔な箇条書き形式で問題点を指摘

---

### スライド14: 最終レポート統合
**タイトル**: 👑 オーケストレーターによる統合
**内容**:

**レポート構成**:
1. **Trigger**: 顧客の声（企業名・ニーズ）
2. **Chemical Insight**: 化学的課題
3. **Cross-Link**: 他事業部の類似知見
4. **Market Trend**: 市場の動き
5. **Proposal**: 新用途・改良アイデア

**出力形式**: Markdown形式の戦略レポート

---

### スライド15: ステップ5 - レポート表示
**タイトル**: 📊 ステップ5：レポート表示
**内容**:

**表示内容**:
1. Markdown形式の戦略レポート
2. 他事業部の類似知見（カード形式、関連度付き）
3. 学術論文情報（カード形式）
4. 会話ログ（LINE風UI）
5. スライド生成（Reveal.js）

**実装ファイル**:
- components/idea_report.py
- components/conversation_log.py
- services/slide_report2.py

---

### スライド16: LINE風UIの実装
**タイトル**: 会話ログの視覚化
**内容**:

**特徴**:
- LINE風のチャットUI
- 各エージェントのアバター表示
- リアルタイム更新

**実装技術**:
```python
def render_message_html(role: str, avatar: str, content: str):
    avatar_base64 = image_to_base64(avatar)
    html = f"""
    <div class="message-container {role}">
        <div class="avatar">
            <img src="data:image/png;base64,{avatar_base64}">
        </div>
        <div class="message-bubble">{content}</div>
    </div>
    """
    return html
```

---

### スライド17: 使用技術スタック（AI・DB）
**タイトル**: 🛠️ 使用技術スタック（AI・データベース）
**内容**:

| 技術 | 用途 |
|-----|-----|
| **Google Gemini 2.5** | AIレビュー、エージェント、レポート生成 |
| **OpenAI Embeddings** | テキストのベクトル化（1536次元） |
| **Supabase** | PostgreSQL + pgvector でベクトル検索 |

**特徴**:
- マルチモーダルAI
- 高速なベクトル検索
- スケーラブルなデータベース

---

### スライド18: 使用技術スタック（API・ライブラリ）
**タイトル**: 🛠️ 使用技術スタック（外部API・ライブラリ）
**内容**:

**外部API**:
- DuckDuckGo Search: 市場トレンド検索
- Google Patents: 特許情報検索
- arXiv API: 学術論文検索

**主要ライブラリ**:
- Streamlit: Webアプリケーションフレームワーク
- LangChain: LLM統合フレームワーク
- Pydantic: データ検証・構造化
- python-docx, pypdf: ファイル解析

---

### スライド19: 技術的なポイント（1/2）
**タイトル**: 💡 技術的なポイント
**内容**:

**1. マルチエージェントシステム**
- 5人のAIエージェントが役割分担
- LangChainの`ChatGoogleGenerativeAI`を使用

**2. ベクトル検索（RAG）**
- OpenAI Embeddings APIでベクトル化
- Supabase pgvectorでコサイン類似度検索
- クロスポリネーションを実現

**3. プロンプトエンジニアリング**
- 各エージェントの役割を明確に定義
- 構造化出力（Pydantic）で一貫性を確保
- `temperature`で創造性と正確性を調整

---

### スライド20: 技術的なポイント（2/2）
**タイトル**: 💡 技術的なポイント（続き）
**内容**:

**4. ストリーミング出力**
- LLMの出力をリアルタイムで表示
- `streaming=True`オプションを使用

**5. データ管理**
- Supabaseで面談録を永続化
- メタデータでフィルタリング
- セッションステートで一時データ管理

**6. 外部API統合**
- エラーハンドリングとフォールバック処理
- レート制限への対応

---

### スライド21: システムの価値
**タイトル**: ✨ このシステムが実現すること
**内容**:

**Before（従来）**:
- 営業が個別に情報収集
- 他事業部の知見が活用されない
- 手動での市場調査に時間がかかる
- 提案の質にバラつき

**After（本システム）**:
- 面談内容を入力するだけ
- AIが自動的に情報を収集・分析
- 他事業部の知見を自動発見
- 一貫性のある戦略レポートを生成
- 短時間で質の高い提案が可能

---

### スライド22: まとめ
**タイトル**: 📝 まとめ
**内容**:

**システムの特徴**:
1. **AI技術**: Google Gemini + OpenAI Embeddings
2. **データベース**: Supabase（PostgreSQL + pgvector）
3. **外部API**: DuckDuckGo、arXiv、Google Patents
4. **フレームワーク**: Streamlit、LangChain
5. **アーキテクチャ**: マルチエージェントシステム + RAG

**効果**:
- 営業担当者の負担軽減
- 部門横断の知識活用
- 戦略的なアイデア創出の加速

---

### スライド23: Q&A
**タイトル**: Q&A
**内容**:
- 質問はこちらへ

**追加情報**:
- ドキュメント: `docs/ai_agent_flow.md`
- 実装コード: GitHub リポジトリ
- デモ環境: [URL]

---

## 指示事項

上記の構成に基づいて、以下の点に注意してスライドを生成してください：

1. **視覚的要素**:
   - 各スライドに適切なアイコンや絵文字を配置
   - フローチャートや図解を積極的に活用
   - コードブロックは見やすくハイライト
   - 表組みを効果的に使用

2. **デザイン**:
   - モダンで技術的な雰囲気
   - ダークテーマまたはプロフェッショナルなカラースキーム
   - 統一感のあるレイアウト
   - 読みやすいフォントサイズ

3. **内容**:
   - 技術者向けに詳細を含める
   - 実装例とコードスニペットを適度に配置
   - 各スライドは1つのトピックに集中
   - 箇条書きを活用して読みやすく

4. **ストーリー**:
   - システムの全体像から詳細へ
   - 各ステップの流れを明確に
   - 技術的なポイントを強調
   - 最後に価値とまとめ

よろしくお願いします。
